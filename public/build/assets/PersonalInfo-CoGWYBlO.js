import{T as P,r as _,h as l,d as i,b as o,w as a,F as g,M as j,o as s,a as d,f as c,u as t,e as q,c as E,t as S}from"./app-QC31J3KV.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex justify-between items-center"},G={class:"flex items-center mb-4"},H={key:0,class:"ml-4"},J={key:1},K={key:1},L={__name:"PersonalInfo",props:{personalInfo:Object},setup(k){const y=k,n=P({name:y.personalInfo.name,email:y.personalInfo.contactInformation,avatar:null}),p=P({password:""}),r=_(!1),w=_(null),f=_(!1),b=()=>{console.log("toggleEdit function called"),r.value=!r.value},F=()=>{console.log("submit function called"),n.post(route("member.portfolios.update"),{preserveScroll:!0,onSuccess:()=>{console.log("submit onSuccess callback"),r.value=!1}})},N=C=>{console.log("handleAvatarChange function called");const e=C.target.files[0];n.avatar=e},A=()=>{console.log("triggerFileInput function called"),w.value.click()},B=()=>{f.value=!0},U=()=>{j.post(route("member.profile"),p,{preserveScroll:!0,onSuccess:()=>{f.value=!1,window.location=route("profile.show")},onError:()=>{p.reset()}})};return(C,e)=>{const m=l("a-button"),V=l("a-avatar"),I=l("a-input"),v=l("a-form-item"),x=l("a-form"),M=l("a-card"),O=l("a-input-password"),T=l("a-modal");return s(),i(g,null,[o(M,{bordered:!1},{title:a(()=>[d("div",D,[e[8]||(e[8]=d("span",null,"Personal Information",-1)),d("div",null,[r.value?(s(),i(g,{key:1},[o(m,{class:"mr-2",onClick:b},{default:a(()=>e[6]||(e[6]=[c("Cancel")])),_:1}),o(m,{type:"primary",onClick:F},{default:a(()=>e[7]||(e[7]=[c("Save")])),_:1})],64)):(s(),i(g,{key:0},[o(m,{onClick:B,class:"mr-2"},{default:a(()=>e[4]||(e[4]=[c("Advanced")])),_:1}),o(m,{type:"primary",onClick:b},{default:a(()=>e[5]||(e[5]=[c("Edit")])),_:1})],64))])])]),default:a(()=>[o(x,{model:t(n)},{default:a(()=>[d("div",G,[o(V,{size:128,src:k.personalInfo.profilePicture},null,8,["src"]),r.value?(s(),i("div",H,[d("input",{type:"file",ref_key:"fileInput",ref:w,onChange:N,accept:"image/*",class:"hidden-file-input"},null,544),o(m,{onClick:A},{default:a(()=>e[9]||(e[9]=[c(" Change Avatar ")])),_:1})])):q("",!0)]),o(v,{label:"Name"},{default:a(()=>[r.value?(s(),E(I,{key:0,type:"input",value:t(n).name,"onUpdate:value":e[0]||(e[0]=u=>t(n).name=u)},null,8,["value"])):(s(),i("span",J,S(t(n).name),1))]),_:1}),o(v,{label:"Email"},{default:a(()=>[r.value?(s(),E(I,{key:0,type:"input",value:t(n).email,"onUpdate:value":e[1]||(e[1]=u=>t(n).email=u),rules:[{type:"email",required:!0,message:"Please input a valid email address"}]},null,8,["value"])):(s(),i("span",K,S(t(n).email),1))]),_:1})]),_:1},8,["model"])]),_:1}),o(T,{open:f.value,"onUpdate:open":e[3]||(e[3]=u=>f.value=u),title:"Confirm Password",onOk:U,okText:"Confirm"},{default:a(()=>[o(x,{model:t(p)},{default:a(()=>[o(v,{label:"Password"},{default:a(()=>[o(O,{value:t(p).password,"onUpdate:value":e[2]||(e[2]=u=>t(p).password=u)},null,8,["value"]),e[10]||(e[10]=d("p",{class:"mt-2 text-sm text-gray-600"}," Please provide your current password before accessing advanced features. ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])],64)}}},W=z(L,[["__scopeId","data-v-6a1b7a58"]]);export{W as default};
