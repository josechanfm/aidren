import{T as F,r as k,h as l,c as b,w as o,u as n,o as i,b as a,a as r,d as f,f as m,e as h,y as I,B as R,U as $}from"./app-6POxqXXZ.js";const A={key:0},T={class:"mt-4"},q={key:0,class:"mt-2"},D=["src","alt"],L={key:1,class:"mt-2"},O=["src"],M={key:1},Y={class:"text-sm mt-2"},z={class:"mt-2 font-medium text-sm text-green-600"},H={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const g=u,t=F({_method:"PUT",name:g.user.name,email:g.user.email,photo:null}),y=k(null),d=k(null),x=()=>{t.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>P()})},j=s=>{s.file.status==="done"?(t.photo=s.file.originFileObj,S()):s.file.status==="error"&&message.error(`${s.file.name} file upload failed.`)},S=()=>{const s=new FileReader;s.onload=e=>{d.value=e.target.result},s.readAsDataURL(t.photo)},C=()=>{t.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{d.value=null,P()}})},P=()=>{t.photo&&(t.photo=null)},N=()=>{y.value=!0},U=async(s,e)=>{const c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e?c.test(e)?Promise.resolve():Promise.reject("Please enter a valid email address"):Promise.reject("Email is required")};return(s,e)=>{const c=l("a-col"),p=l("a-button"),B=l("a-upload"),w=l("a-input"),_=l("a-form-item"),E=l("a-row"),V=l("a-form");return i(),b(V,{model:n(t),onFinish:x},{default:o(()=>[a(E,{gutter:16},{default:o(()=>[a(c,{span:12},{default:o(()=>e[2]||(e[2]=[r("h3",{class:"text-lg font-medium text-gray-900"},"Profile Information",-1),r("p",{class:"mt-1 text-sm text-gray-600"}," Update your account's profile information and email address. ",-1)])),_:1}),a(c,{span:12},{default:o(()=>[s.$page.props.jetstream.managesProfilePhotos?(i(),f("div",A,[r("div",T,[d.value?(i(),f("div",L,[r("img",{src:d.value,class:"rounded-full h-20 w-20 object-cover"},null,8,O)])):(i(),f("div",q,[r("img",{src:u.user.profile_photo_url,alt:u.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,D)])),a(B,{name:"photo","show-upload-list":!1,"before-upload":()=>!1,onChange:j},{default:o(()=>[a(p,null,{default:o(()=>e[3]||(e[3]=[m("Select A New Photo")])),_:1})]),_:1}),u.user.profile_photo_path?(i(),b(p,{key:2,type:"link",onClick:C},{default:o(()=>e[4]||(e[4]=[m(" Remove Photo ")])),_:1})):h("",!0)])])):h("",!0),a(_,{label:"Name"},{default:o(()=>[a(w,{type:"input",value:n(t).name,"onUpdate:value":e[0]||(e[0]=v=>n(t).name=v)},null,8,["value"])]),_:1}),a(_,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{validator:U,trigger:"blur"}]},{default:o(()=>[a(w,{type:"input",value:n(t).email,"onUpdate:value":e[1]||(e[1]=v=>n(t).email=v)},null,8,["value"])]),_:1},8,["rules"]),s.$page.props.jetstream.hasEmailVerification&&u.user.email_verified_at===null?(i(),f("div",M,[r("p",Y,[e[6]||(e[6]=m(" Your email address is unverified. ")),a(p,{type:"link",onClick:I(N,["prevent"])},{default:o(()=>e[5]||(e[5]=[m(" Click here to re-send the verification email. ")])),_:1})]),R(r("div",z," A new verification link has been sent to your email address. ",512),[[$,y.value]])])):h("",!0),a(_,null,{default:o(()=>[a(p,{type:"primary","html-type":"submit",loading:n(t).processing},{default:o(()=>e[7]||(e[7]=[m("Save")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}};export{H as default};
