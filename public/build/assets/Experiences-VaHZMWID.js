import{r as b,T as P,h as s,c as C,w as l,o as u,b as o,f as p,d as D,u as r,X as R,e as Y,F as M,M as v}from"./app-Cta_gWxB.js";const m="YYYY-MM-DD",X={__name:"Experiences",props:{experiences:Array,portfolioId:Number},setup(y){const x=y,d=b(!1),c=b("CREATE"),e=P({id:null,position:"",company:"",start_date:"",end_date:"",is_current:!1,description:""}),I=a=>{console.log("editExperience function called",a),e.id=a.id,e.position=a.position,e.company=a.company,e.start_date=a.start_date,e.end_date=a.end_date,e.is_current=a.is_current,e.description=a.description,c.value="EDIT",d.value=!0},g=()=>{console.log("addExperience function called"),e.reset(),c.value="CREATE",d.value=!0},A=()=>{console.log("cancelModal function called"),d.value=!1,e.reset()},S=()=>{const a={...e.data(),start_date:e.start_date?dayjs(e.start_date).tz("Asia/Macao").format("YYYY-MM-DD"):null,end_date:e.end_date?dayjs(e.end_date).tz("Asia/Macao").format("YYYY-MM-DD"):null};c.value==="EDIT"?(console.log("saveExperience function called",a),v.put(route("member.portfolio.experiences.update",[x.portfolioId,e.id]),a,{preserveScroll:!0,onSuccess:()=>{d.value=!1,e.reset()}})):(console.log("createExperience function called",a),v.post(route("member.portfolio.experiences.store",x.portfolioId),a,{preserveScroll:!0,onSuccess:()=>{d.value=!1,e.reset()}}))},w=a=>{console.log("deleteExperience function called",a.id),v.delete(route("member.portfolio.experiences.destroy",a.id),{preserveScroll:!0})},T=[{title:"Position",dataIndex:"position",key:"position"},{title:"Company",dataIndex:"company",key:"company"},{title:"Duration",dataIndex:"duration",key:"duration"},{title:"Current",dataIndex:"is_current",key:"is_current"},{title:"Action",key:"action"}];return(a,t)=>{const _=s("a-button"),U=s("a-popconfirm"),F=s("a-table"),k=s("a-input"),i=s("a-form-item"),E=s("a-date-picker"),N=s("a-checkbox"),V=s("a-textarea"),z=s("a-form"),B=s("a-modal"),j=s("a-card");return u(),C(j,{title:"Experiences",bordered:!1},{extra:l(()=>[o(_,{type:"primary",onClick:g},{default:l(()=>t[7]||(t[7]=[p("Add Experience")])),_:1})]),default:l(()=>[o(F,{dataSource:y.experiences,columns:T},{bodyCell:l(({column:n,record:f})=>[n.key==="is_current"?(u(),D(M,{key:0},[f.is_current?(u(),C(r(R),{key:0,style:{color:"#52c41a","font-size":"18px"}})):Y("",!0)],64)):n.key==="action"?(u(),D(M,{key:1},[o(_,{type:"primary",onClick:O=>I(f),class:"mr-2"},{default:l(()=>t[8]||(t[8]=[p("Edit")])),_:2},1032,["onClick"]),o(U,{title:"Are you sure you want to delete this experience?","ok-text":"Yes","cancel-text":"No",onConfirm:O=>w(f)},{default:l(()=>[o(_,{danger:""},{default:l(()=>t[9]||(t[9]=[p("Delete")])),_:1})]),_:2},1032,["onConfirm"])],64)):Y("",!0)]),_:1},8,["dataSource"]),o(B,{open:d.value,"onUpdate:open":t[6]||(t[6]=n=>d.value=n),title:c.value==="EDIT"?"Edit Experience":"Add Experience",onOk:S,onCancel:A},{default:l(()=>[o(z,{model:r(e),layout:"vertical"},{default:l(()=>[o(i,{label:"Position",name:"position"},{default:l(()=>[o(k,{value:r(e).position,"onUpdate:value":t[0]||(t[0]=n=>r(e).position=n)},null,8,["value"])]),_:1}),o(i,{label:"Company",name:"company"},{default:l(()=>[o(k,{value:r(e).company,"onUpdate:value":t[1]||(t[1]=n=>r(e).company=n)},null,8,["value"])]),_:1}),o(i,{label:"Start Date",name:"start_date"},{default:l(()=>[o(E,{value:r(e).start_date,"onUpdate:value":t[2]||(t[2]=n=>r(e).start_date=n),style:{width:"100%"},format:m,valueFormat:m},null,8,["value"])]),_:1}),o(i,{label:"End Date",name:"end_date"},{default:l(()=>[o(E,{value:r(e).end_date,"onUpdate:value":t[3]||(t[3]=n=>r(e).end_date=n),style:{width:"100%"},disabled:r(e).is_current,format:m,valueFormat:m},null,8,["value","disabled"])]),_:1}),o(i,{name:"is_current"},{default:l(()=>[o(N,{checked:r(e).is_current,"onUpdate:checked":t[4]||(t[4]=n=>r(e).is_current=n)},{default:l(()=>t[10]||(t[10]=[p("Currently working here")])),_:1},8,["checked"])]),_:1}),o(i,{label:"Description",name:"description"},{default:l(()=>[o(V,{value:r(e).description,"onUpdate:value":t[5]||(t[5]=n=>r(e).description=n),rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])]),_:1})}}};export{X as default};
